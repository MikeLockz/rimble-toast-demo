(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{134:function(t,e,n){t.exports=n(321)},139:function(t,e,n){},177:function(t,e){},179:function(t,e){},204:function(t,e){},247:function(t,e){},321:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),r=n(49),c=n.n(r),i=(n(139),n(14)),s=n(15),u=n(17),l=n(16),p=n(18),m=n(6),d=n(132),h=function(t){function e(){return Object(i.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return o.a.createElement(m.b,{size:"medium",mr:4,onClick:this.props.initAccount,disabled:this.props.account},"Connect")}}]),e}(o.a.Component),f=[{constant:!1,inputs:[],name:"decrementCounter",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"incrementCounter",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"reset",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{constant:!0,inputs:[],name:"getCounter",outputs:[{name:"",type:"int256"}],payable:!1,stateMutability:"view",type:"function"}],b=function(t){function e(){var t,n;Object(i.a)(this,e);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(o)))).state={value:0},n.getNumber=function(t){Object(d.a)({},t);var e=n.props.contract;try{e.methods.getCounter().call().then(function(t){t=Number(t.toString()),n.setState({value:t})}).catch(function(t){console.log(t),n.setState({error:t})})}catch(a){console.log("error",a)}console.log("got number",n.state.value)},n.resetCounter=function(){n.props.contractMethodSendWrapper("reset")},n.incrementCounter=function(){n.props.contractMethodSendWrapper("incrementCounter")},n.decrementCounter=function(){n.props.contractMethodSendWrapper("decrementCounter")},n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.props.initContract("0x0f69f0ac4b92bf0d101b5747eed3fa6b653a36f8",f).then(function(){t.getNumber()})}},{key:"render",value:function(){return o.a.createElement(m.c,{width:"600px",mx:"auto",px:4},o.a.createElement(m.e.h1,{fontSize:5,textAlign:"center",px:4,mb:5},"Rimble Smart Contract Example"),o.a.createElement(m.a,null,o.a.createElement(m.a,{py:4},o.a.createElement(m.h,{mb:2,fontSize:3},"Value from smart contract:"),o.a.createElement(m.h,{fontSize:6,textAlign:"center"},this.state.value)),o.a.createElement(m.d,{px:0,pt:4,borderTop:1,borderColor:"#E8E8E8",justifyContent:"space-between"},o.a.createElement(h,{initAccount:this.props.initAccount,account:this.props.account}),o.a.createElement(m.f,{size:"medium",mr:4,onClick:this.resetCounter,disabled:!this.props.account},"Reset"),o.a.createElement(m.f,{size:"medium",mr:4,onClick:this.incrementCounter,disabled:!this.props.account},"Increment"),o.a.createElement(m.f,{size:"medium",onClick:this.decrementCounter,disabled:!this.props.account},"Decrement"))))}}]),e}(o.a.Component),w=n(71),g=n(26),v=n.n(g),y=n(51),E=n(70),C=n.n(E),j=o.a.createContext({contract:{},account:{},web3:{},initWeb3:function(){},initContract:function(){},initAccount:function(){}}),T=function(t){function e(){var t,n;Object(i.a)(this,e);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(o)))).initWeb3=Object(y.a)(v.a.mark(function t(){var e;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e={},window.ethereum?(console.log("Using modern web3 provider."),e=new C.a(window.ethereum)):window.web3?(console.log("Legacy web3 provider. Try updating."),e=new C.a(window.web3.currentProvider)):(console.log("Non-Ethereum browser detected. You should consider trying MetaMask!"),window.toastProvider.addMessage("Something?",{message:"No wallet available. Unable to continue.",variant:"failure"}),e=!1),n.setState({web3:e});case 3:case"end":return t.stop()}},t,this)})),n.initContract=function(){var t=Object(y.a)(v.a.mark(function t(e,a){var o;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("creating contract"),t.prev=1,t.next=4,new n.state.web3.eth.Contract(a,e);case 4:o=t.sent,n.setState({contract:o}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("Could not create contract."),window.toastProvider.addMessage("Something?",{message:"Contract creation failed.",variant:"failure"});case 12:case"end":return t.stop()}},t,this,[[1,8]])}));return function(e,n){return t.apply(this,arguments)}}(),n.initAccount=Object(y.a)(v.a.mark(function t(){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,window.ethereum.enable().then(function(t){var e=t[0];n.setState({account:e}),console.log("wallet address:",n.state.account)});case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),console.log("error:",t.t0),window.toastProvider.addMessage("Something?",{message:"User needs to CONNECT wallet",variant:"failure"});case 9:case"end":return t.stop()}},t,this,[[0,5]])})),n.contractMethodSendWrapper=function(t){var e={};e.created=Date.now(),console.log("Starting Transaction"),e.status="started",n.showTransactionToast(e);var a=n.state,o=a.contract,r=a.account;try{o.methods[t]().send({from:r}).on("transactionHash",function(t){console.log("Transaction sent to block successfully. Result pending."),e.status="pending",n.showTransactionToast(e)}).on("confirmation",function(t,a){t<3?console.log("Confirmation "+t+". Threshold for confidence not met."):t>3?console.log("Confirmation "+t+". Confidence threshold already met."):(console.log("receipt: ",a),e=Object(w.a)({},e,a),console.log("Transaction confirmed."),e.status="confirmed",n.showTransactionToast(e),!0===a.status?(console.log("Transaction completed successfully!"),e.status="success"):!1===a.status&&(console.log("Transaction reverted due to error."),e.status="error"),n.showTransactionToast(e))}).on("receipt",function(t){console.log("receipt: ",t)}).on("error",function(t){console.log(t),e.status="error",n.showTransactionToast(e)})}catch(c){console.log("Error calling method on smart contract."),e.status="error",n.showTransactionToast(e)}},n.showTransactionToast=function(t){var e={};e.lastUpdated=Date.now(),e=Object(w.a)({},e,t);var a=n.getTransactionToastMeta(e);window.toastProvider.addMessage("...",a)},n.getTransactionToastMeta=function(t){var e={},n=t.status,a=t.transactionHash;switch(n){case"started":e={message:"Started a new transaction",actionHref:"",actionText:"",variant:"default",icon:"InfoOutline"};break;case"pending":e={message:"Transaction is pending",actionHref:"",actionText:"",variant:"processing"};break;case"confirmed":e={message:"Transaction is confirmed",actionHref:"https://rinkeby.etherscan.io/tx/"+a,actionText:"View on Etherscan",variant:"success"};break;case"success":e={message:"Transaction completed successfully",actionHref:"https://rinkeby.etherscan.io/tx/"+a,actionText:"View on Etherscan",variant:"success"};break;case"error":e={message:"Error",actionHref:"https://rinkeby.etherscan.io/tx/"+a,actionText:"View on Etherscan",variant:"failure"}}return e},n.state={contract:{},account:null,web3:null,initWeb3:n.initWeb3,initContract:n.initContract,initAccount:n.initAccount,contractMethodSendWrapper:n.contractMethodSendWrapper},n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){this.initWeb3()}},{key:"render",value:function(){return o.a.createElement(j.Provider,Object.assign({value:this.state},this.props))}}]),e}(o.a.Component);T.Consumer=j.Consumer;var O=T,k=function(t){function e(){return Object(i.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return o.a.createElement(m.c,{width:"600px",mx:"auto",px:4},o.a.createElement(m.a,null,o.a.createElement("p",null,"Instructions:"),o.a.createElement("ul",null,o.a.createElement("li",null,"Make sure MetaMask is working in your browser"),o.a.createElement("li",null,"Set the network to Rinkeby Test Network"),o.a.createElement("li",null,"You'll need a little bit of eth for gas fees")),o.a.createElement("p",null,"About"),o.a.createElement("p",null,"This is an example of a webapp that interacts with a Smart Contract. The demo uses Web3.js and Rimble UI Components to show the status of a Smart Contract transaction via toast messages."," ")))}}]),e}(o.a.Component),x=function(t){function e(){return Object(i.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return o.a.createElement(m.c,null,o.a.createElement(m.d,{px:0,pt:4,borderTop:1,borderColor:"#E8E8E8",justifyContent:"space-between"},o.a.createElement("div",null,"Transaction Status: ",o.a.createElement(m.g,{color:"gray"},"unknown"))))}}]),e}(o.a.Component),S=function(t){function e(){return Object(i.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(m.a,{my:"auto"},o.a.createElement(O,null,o.a.createElement(O.Consumer,null,function(t){var e=t.web3,n=t.contract,a=t.account,r=t.initContract,c=t.initAccount,i=t.contractMethodSendWrapper;return o.a.createElement("div",null,e?o.a.createElement("div",null,o.a.createElement(b,{contract:n,account:a,initContract:r,initAccount:c,contractMethodSendWrapper:i}),o.a.createElement(x,null)):null)})),o.a.createElement(m.i.Provider,{ref:function(t){return window.toastProvider=t}})),o.a.createElement(k,null))}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[134,2,1]]]);
//# sourceMappingURL=main.2b6bf424.chunk.js.map